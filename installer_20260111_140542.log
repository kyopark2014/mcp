2026-01-11 14:05:42 - INFO - ============================================================
2026-01-11 14:05:42 - INFO - Starting AWS Infrastructure Deployment
2026-01-11 14:05:42 - INFO - ============================================================
2026-01-11 14:05:42 - INFO - Project: mcp
2026-01-11 14:05:42 - INFO - Region: us-west-2
2026-01-11 14:05:42 - INFO - Account ID: 262976740991
2026-01-11 14:05:42 - INFO - Bucket Name: storage-for-mcp-262976740991-us-west-2
2026-01-11 14:05:42 - INFO - ============================================================
2026-01-11 14:05:42 - INFO - [1/10] Creating S3 bucket: storage-for-mcp-262976740991-us-west-2
2026-01-11 14:05:44 - INFO - ✓ S3 bucket created successfully: storage-for-mcp-262976740991-us-west-2
2026-01-11 14:05:44 - INFO - S3 bucket created...
2026-01-11 14:05:44 - INFO - [2/10] Creating Knowledge Base IAM role
2026-01-11 14:05:45 - INFO - ✓ IAM role created: role-knowledge-base-for-mcp-us-west-2
2026-01-11 14:05:46 - INFO - [2/10] Creating Agent IAM role
2026-01-11 14:05:47 - INFO - ✓ IAM role created: role-agent-for-mcp-us-west-2
2026-01-11 14:05:48 - INFO - [2/10] Creating EC2 IAM role
2026-01-11 14:05:49 - INFO - ✓ IAM role created: role-ec2-for-mcp-us-west-2
2026-01-11 14:05:53 - INFO - [2/10] Creating AgentCore Memory IAM role
2026-01-11 14:05:54 - INFO - ✓ IAM role created: role-agentcore-memory-for-mcp-us-west-2
2026-01-11 14:05:54 - INFO - IAM roles created...
2026-01-11 14:05:54 - INFO - [3/10] Creating Secrets Manager secrets
2026-01-11 14:05:54 - INFO - Please enter API keys when prompted (press Enter to skip and leave empty):
2026-01-11 14:05:54 - INFO - Enter credential of openweathermap-mcp (Weather API Key - OpenWeatherMap):
2026-01-11 14:10:33 - INFO -   ✓ Created secret: openweathermap-mcp
2026-01-11 14:10:34 - INFO - Enter credential of langsmithapikey-mcp (LangSmith API Key):
2026-01-11 14:10:41 - INFO -   ✓ Created secret: langsmithapikey-mcp
2026-01-11 14:10:41 - INFO - Enter credential of tavilyapikey-mcp (Tavily API Key):
2026-01-11 14:10:47 - INFO -   ✓ Created secret: tavilyapikey-mcp
2026-01-11 14:10:48 - INFO - Enter credential of perplexityapikey-mcp (Perplexity API Key):
2026-01-11 14:10:56 - INFO -   ✓ Created secret: perplexityapikey-mcp
2026-01-11 14:10:56 - INFO - Enter credential of firecrawlapikey-mcp (Firecrawl API Key):
2026-01-11 14:11:04 - INFO -   ✓ Created secret: firecrawlapikey-mcp
2026-01-11 14:11:04 - INFO - Enter credential of novaactapikey-mcp (Nova Act API Key):
2026-01-11 14:11:12 - INFO -   ✓ Created secret: novaactapikey-mcp
2026-01-11 14:11:13 - INFO - Enter credential of notionapikey-mcp (Notion API Key):
2026-01-11 14:11:19 - INFO -   ✓ Created secret: notionapikey-mcp
2026-01-11 14:11:19 - INFO - ✓ Created 7 secrets
2026-01-11 14:11:19 - INFO - Secrets created...
2026-01-11 14:11:19 - INFO - [4/10] Creating OpenSearch Serverless collection
2026-01-11 14:11:26 - INFO -   Waiting for collection to be active (this may take a few minutes)...
2026-01-11 14:12:26 - INFO - ✓ OpenSearch collection created: mcp
2026-01-11 14:12:26 - INFO -   Endpoint: https://wvh61zk601srfyzjs874.us-west-2.aoss.amazonaws.com
2026-01-11 14:12:26 - INFO - OpenSearch collection created...
2026-01-11 14:12:26 - INFO - [4.5/10] Creating Knowledge Base with OpenSearch collection
2026-01-11 14:12:26 - INFO -   Creating vector index in OpenSearch collection...
2026-01-11 14:12:26 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2026-01-11 14:12:28 - INFO -   ✓ Vector index 'mcp' created successfully
2026-01-11 14:12:28 - INFO -   Waiting for index to be ready...
2026-01-11 14:12:58 - INFO -   Checking if Knowledge Base already exists...
2026-01-11 14:12:59 - INFO -   Knowledge Base does not exist. Creating new one...
2026-01-11 14:12:59 - INFO -   Verifying Knowledge Base role configuration...
2026-01-11 14:13:00 - INFO -   ✓ Knowledge Base role trust policy is correct
2026-01-11 14:13:00 - INFO - ✓ Knowledge Base created: FC5BVXXJU7
2026-01-11 14:13:00 - INFO -   Waiting for Knowledge Base to be active...
2026-01-11 14:13:11 - INFO -   Knowledge Base is now active
2026-01-11 14:13:11 - INFO -   Creating data source...
2026-01-11 14:13:11 - INFO -   ✓ Data source created: CRAA3VST9K
2026-01-11 14:13:11 - INFO - Knowledge base created...
2026-01-11 14:13:11 - INFO - [5/10] Creating VPC and networking resources
2026-01-11 14:13:12 - INFO - Using CIDR block: 10.23.0.0/16
2026-01-11 14:13:12 - INFO - No existing VPC found, creating new VPC...
2026-01-11 14:13:14 - INFO -   No Internet Gateway found. Creating Internet Gateway...
2026-01-11 14:13:15 - INFO -   Created and attached Internet Gateway: igw-0cd36daeb1d4957bf
2026-01-11 14:13:15 - INFO -   Created public subnet: subnet-09095da0e75281167 in us-west-2a with CIDR 10.23.0.0/24
2026-01-11 14:13:16 - INFO -   Created public subnet: subnet-04f0e1fa92c445752 in us-west-2b with CIDR 10.23.1.0/24
2026-01-11 14:13:16 - INFO -   Allocating Elastic IP for NAT Gateway...
2026-01-11 14:13:17 - INFO -   Creating NAT Gateway (this may take a few minutes)...
2026-01-11 14:13:18 - INFO -   Waiting for NAT Gateway to be available...
2026-01-11 14:14:42 - INFO -   Created private route table: rtb-0f6db8a503e38fe14
2026-01-11 14:14:42 - INFO -   Created private subnet: subnet-003931b55e6d21d0e in us-west-2a with CIDR 10.23.2.0/24
2026-01-11 14:14:44 - INFO -   Created private subnet: subnet-09a1fbf43ea30b992 in us-west-2b with CIDR 10.23.3.0/24
2026-01-11 14:14:47 - INFO - Created VPC endpoint for com.amazonaws.us-west-2.bedrock-runtime: vpce-048f2224bdf70c461
2026-01-11 14:14:47 - INFO - ✓ VPC created: vpc-0756bf823b2103fa3
2026-01-11 14:14:47 - INFO - VPC created...
2026-01-11 14:14:47 - INFO - [6/10] Creating Application Load Balancer
2026-01-11 14:14:50 - INFO - ✓ ALB created: alb-for-mcp-679484347.us-west-2.elb.amazonaws.com
2026-01-11 14:14:50 - INFO - ALB created...
2026-01-11 14:14:50 - INFO - [7/10] Creating CloudFront distribution (ALB + S3 hybrid)
2026-01-11 14:14:51 - INFO -   Checking for existing Origin Access Identity for S3...
2026-01-11 14:14:51 - INFO -   ✓ Using existing Origin Access Identity: E2H468J5H2ZS6I
2026-01-11 14:14:51 - INFO -   Updating S3 bucket policy for CloudFront access...
2026-01-11 14:14:51 - INFO -   Waiting for OAI to propagate...
2026-01-11 14:15:01 - INFO -   ✓ Updated S3 bucket policy
2026-01-11 14:15:01 - INFO -   Creating CloudFront distribution with ALB and S3 origins...
2026-01-11 14:15:01 - INFO - Creating CloudFront distribution with config:
2026-01-11 14:15:01 - INFO -   Origins: ['alb-mcp', 's3-mcp']
2026-01-11 14:15:01 - INFO -   DefaultCacheBehavior TargetOriginId: alb-mcp
2026-01-11 14:15:01 - INFO -   CacheBehaviors: 2 behaviors
2026-01-11 14:15:03 - INFO - ✓ CloudFront distribution created (ALB + S3): d31j58euwpg28q.cloudfront.net
2026-01-11 14:15:03 - INFO -   Distribution ID: E3HPGRCNF4QGST
2026-01-11 14:15:03 - INFO -   Default origin: ALB alb-for-mcp-679484347.us-west-2.elb.amazonaws.com
2026-01-11 14:15:03 - INFO -   /images/* and /docs/* origins: S3 bucket storage-for-mcp-262976740991-us-west-2
2026-01-11 14:15:03 - WARNING -   Note: CloudFront distribution may take 15-20 minutes to deploy
2026-01-11 14:15:03 - INFO - CloudFront distribution created...
2026-01-11 14:15:03 - INFO - [8/10] Creating EC2 instance
2026-01-11 14:15:07 - INFO - ✓ EC2 instance created: i-0d27332909c5812d1
2026-01-11 14:15:07 - INFO -   Instance type: t3.medium
2026-01-11 14:15:07 - INFO -   Deployed in private subnet: subnet-003931b55e6d21d0e
2026-01-11 14:15:07 - INFO -   User data script configured for application deployment
2026-01-11 14:15:07 - INFO - EC2 instance created...
2026-01-11 14:15:07 - INFO - [9/10] Creating ALB target group and listener
2026-01-11 14:15:25 - INFO -   ✓ Registered EC2 instance i-0d27332909c5812d1 to target group
2026-01-11 14:15:26 - INFO -   ✓ Created rule for custom header
2026-01-11 14:15:26 - INFO - ✓ ALB target group and listener created
2026-01-11 14:15:26 - INFO -   Target group: arn:aws:elasticloadbalancing:us-west-2:262976740991:targetgroup/TG-for-mcp/775146883f56c661
2026-01-11 14:15:26 - INFO -   Listener: arn:aws:elasticloadbalancing:us-west-2:262976740991:listener/app/alb-for-mcp/be4990cb23abc051/980ced2539827f12
2026-01-11 14:15:26 - INFO - ALB target group and listener created...
2026-01-11 14:15:26 - INFO - Checking if application is ready: d31j58euwpg28q.cloudfront.net
2026-01-11 14:15:26 - INFO - [10/10] Checking if application is ready at https://d31j58euwpg28q.cloudfront.net
2026-01-11 14:15:26 - INFO -   Maximum 120 attempts, 10 seconds between attempts (up to 20 minutes)
2026-01-11 14:15:26 - INFO -   In progress... [1/120] - Connection attempt
2026-01-11 14:15:56 - INFO -   In progress... [4/120] - Connection attempt
2026-01-11 14:16:26 - INFO -   In progress... [7/120] - Connection attempt
2026-01-11 14:16:56 - INFO -   In progress... [10/120] - HTTP 502 response
2026-01-11 14:17:27 - INFO -   In progress... [13/120] - HTTP 502 response
2026-01-11 14:17:58 - INFO -   In progress... [16/120] - HTTP 502 response
2026-01-11 14:18:29 - INFO -   In progress... [19/120] - HTTP 502 response
2026-01-11 14:19:00 - INFO -   In progress... [22/120] - HTTP 502 response
2026-01-11 14:19:30 - INFO -   In progress... [25/120] - HTTP 502 response
2026-01-11 14:20:01 - INFO -   In progress... [28/120] - HTTP 502 response
2026-01-11 14:20:32 - INFO -   In progress... [31/120] - HTTP 502 response
2026-01-11 14:21:03 - INFO -   In progress... [34/120] - HTTP 502 response
2026-01-11 14:21:13 - INFO - ✓ Application is ready! Status code: 200
2026-01-11 14:21:13 - INFO -   Total attempts: 35/120, elapsed time: 5.8 minutes
2026-01-11 14:21:13 - INFO - 
2026-01-11 14:21:13 - INFO - ============================================================
2026-01-11 14:21:13 - INFO - Infrastructure Deployment Completed Successfully!
2026-01-11 14:21:13 - INFO - ============================================================
2026-01-11 14:21:13 - INFO - Summary:
2026-01-11 14:21:13 - INFO -   S3 Bucket: storage-for-mcp-262976740991-us-west-2
2026-01-11 14:21:13 - INFO -   VPC ID: vpc-0756bf823b2103fa3
2026-01-11 14:21:13 - INFO -   Public Subnets: subnet-09095da0e75281167, subnet-04f0e1fa92c445752
2026-01-11 14:21:13 - INFO -   Private Subnets: subnet-003931b55e6d21d0e, subnet-09a1fbf43ea30b992
2026-01-11 14:21:13 - INFO -   ALB DNS: http://alb-for-mcp-679484347.us-west-2.elb.amazonaws.com/
2026-01-11 14:21:13 - INFO -   CloudFront Domain: https://d31j58euwpg28q.cloudfront.net
2026-01-11 14:21:13 - INFO -   EC2 Instance ID: i-0d27332909c5812d1 (deployed in private subnet)
2026-01-11 14:21:13 - INFO -   OpenSearch Endpoint: https://wvh61zk601srfyzjs874.us-west-2.aoss.amazonaws.com
2026-01-11 14:21:13 - INFO -   Knowledge Base ID: FC5BVXXJU7
2026-01-11 14:21:13 - INFO -   Knowledge Base Role: arn:aws:iam::262976740991:role/role-knowledge-base-for-mcp-us-west-2
2026-01-11 14:21:13 - INFO -   AgentCore Memory Role: arn:aws:iam::262976740991:role/role-agentcore-memory-for-mcp-us-west-2
2026-01-11 14:21:13 - INFO - 
2026-01-11 14:21:13 - INFO - Total deployment time: 15.53 minutes
2026-01-11 14:21:13 - INFO - ============================================================
2026-01-11 14:21:13 - INFO - Note: CloudFront distribution may take 15-20 minutes to fully deploy
2026-01-11 14:21:13 - INFO - Note: EC2 instance user data script will install and start the application
2026-01-11 14:21:13 - INFO - ============================================================
2026-01-11 14:21:13 - INFO - OpenSearch Collection ARN: arn:aws:aoss:us-west-2:262976740991:collection/wvh61zk601srfyzjs874
2026-01-11 14:21:13 - INFO - OpenSearch Collection Endpoint: https://wvh61zk601srfyzjs874.us-west-2.aoss.amazonaws.com
2026-01-11 14:21:13 - INFO - ✓ Updated application/config.json
2026-01-11 14:21:13 - INFO - ============================================================
2026-01-11 14:21:13 - INFO - 
2026-01-11 14:21:13 - INFO - ============================================================
2026-01-11 14:21:13 - INFO -   IMPORTANT: CloudFront Domain Address
2026-01-11 14:21:13 - INFO - ============================================================
2026-01-11 14:21:13 - INFO -  CloudFront URL: https://d31j58euwpg28q.cloudfront.net
2026-01-11 14:21:13 - INFO - 
2026-01-11 14:21:13 - INFO - Note: CloudFront distribution and agent application on EC2 instance may take 15-20 minutes to fully deploy
2026-01-11 14:21:13 - INFO -       Once deployed, you can access your application at the URL above
2026-01-11 14:21:13 - INFO - ============================================================
2026-01-11 14:21:13 - INFO - 
